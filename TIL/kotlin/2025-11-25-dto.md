# DTO, Mapper

### DTO ( Data Transfer Object)

- 잘못된 데이터를 안전하게 받아서 차리할 곳이 필요하다.
- DTO: 데이터 소스를 모델 클래스로 변환하는 과정에서 순수하게 클래스에 담기 위한 중간 전달 객체
- JSON -> DTO -> Model Class
- 잘못된 데이터 소스(JSON)를 받더라도 안 터지게 하려는 클라이언트 개발자의 방어 수단.
- DTO는 계층/프로세스 사이에 데이터를 안전하게 전달하기 위한 전용 데이터 객체

### DTO 코드 예시

```kotlin
@Serializable
data class TodoDto(
    val userId: Int? = null,
    val id: Int? = null,
    val title: String? = null,
    val completed: Boolean? = null,
)

```

- 모든 필드가 nullable 변수
- 직렬화, 역직렬화 제공

### Mapper 코드 예시

```kotlin
// TodoMapper.kt
fun TodoDto.toTodo(): Todo {
    return Todo(
        userId = userId ?: 0,
        id = id ?: 0,
        title = title ?: "제목 없음",
        isCompleted = completed ?: false,
    )
}
```

### Mapper 작성시 extension을 선호하는 이유.

-DTO 는 자동으로 만들고 수정하지 않는다 (무지성, 다른 코드 개입 no, 실수 방지)
-mapper 는 복잡한 로직이 포함될 수 있어서 인간이 작성, 문제 있으면 여기만 살핀다
-DTO와 mapper 코드를 분리

### 추천 폴더 구조

```text
src/main/kotlin/com/example/todo/
  data_source/
    // 외부 데이터 소스(API, DB 등과의 통신 책임)
    TodoDataSource.kt

  dto/
    // 네트워크 응답 등 외부 데이터 전용 모델
    TodoDto.kt

  mapper/
    // DTO <-> 내부 모델 변환 로직
    TodoMapper.kt

  model/
    // 앱 내부에서 쓰는 도메인(엔티티, UI 모델)
    Todo.kt

  repository/
    // 데이터 추상화, 상위 레이어(ViewModel·UseCase) 제공 창구
    TodoRepository.kt

```


