# Test 이론

### Test Double

- 테스트를 진행하기 어려운 경우에 테스트가 가능하도록 만들어주는 객체.
- 테스트 대상이 의존하는 외부 객체를, 테스트에 유리하게 바꿔 끼우는 대체 객체를 말한다.

> 테스트 하기에 클래스 보다는 인터페이스가 낫다.

### Test Double 기본 개념

- Test Double은 실제 구현 대신, 테스트용으로 설계된 가짜 객체(대역)다.
- 목적은 외부 의존성(DB, 네트워크, 파일, 시간, 랜덤, 외부 API 등)에 영향을 받지 않고, 순수하게 비즈니스 로직만 안정적으로·빠르게 검증하는 데 있다.
- 이름은 영화 촬영에서 배우 대신 위험한 장면을 수행하는 스턴트 더블(stunt double)에서 따온 것이다.

코틀린이라고 해서 개념이 달라지는 건 아니고, 자바/JVM 진영에서 쓰는 Test Double 패턴을 그대로 코틀린 문법과 라이브러리(mockk, Mockito-kotlin 등)로 구현한다고 보면 된다.

### Test Double의 주요 종류

정통 분류는 Dummy, Stub, Fake, Spy, Mock 5가지가 많이 쓰인다.

### 코틀린에서의 사용 패턴

- **언어 차원**: Test Double 개념은 언어 독립적이지만, 코틀린에서는
    - `object : Interface { ... }` 익명 객체로 Stub/Fake를 자주 구현하고
    - data class, nullable/디폴트 파라미터로 Dummy를 쉽게 만들 수 있다.
- **라이브러리**
    - MockK: 코틀린 친화적인 Mock/Spy/Stub 기능 제공.
    - Mockito-kotlin: 기존 Mockito를 코틀린스럽게 래핑.
- **안드로이드**
    - Repository, DataSource, API client, DispatcherProvider, Clock 등을 Test Double로 교체해 ViewModel/UseCase를 독립적으로 테스트하는
      패턴이 일반적이다.



