#  Kotlin 기초 정리 – 클래스와 인스턴스

## 객체지향 (Object-Oriented Programming)

- **객체지향이란?**  
  현실 세계의 사물을 그대로 옮겨와 코드로 표현하는 방식  
  → 인간이 이해하기 쉽게 설계하기 위해 만들어진 프로그래밍

---

## 💡 기본 개념

| 구분 | 설명 | 예시 비유 |
|------|------|------------|
| **오브젝트 (Object)** | 현실 세계의 모든 사물이나 개체 | ‘붕어빵’ |
| **클래스 (Class)** | 오브젝트를 코드로 표현하기 위한 설계도 | ‘붕어빵 틀’ |
| **인스턴스 (Instance)** | 클래스를 이용해 실제 메모리에 생성된 객체 | ‘붕어빵 틀로 찍은 붕어빵’ |


> 인스턴스란 메모리에 올라간 객체

---

## 코틀린과 자바의 차이

| 항목 | Kotlin | Java |
|------|---------|------|
| **변수 선언 시 초기값 없음** | 오류 발생 (컴파일 오류) | 기본값 `null` 허용 |
| **생성자 기본값 지원** | O (생성자 파라미터에 기본값 지정 가능) | X (오버로딩으로 처리) |
| **클래스 선언부 var/val 사용** | `var`, `val`을 붙이면 필드로 자동 정의 | 별도로 필드 선언 필요 |

---

## 클래스 기본 문법

```kotlin
class Person(
    val name: String,
    var age: Int = 0 // 기본값 지정 가능
) {
    var hobby = "축구"

    init {
        println("init block 실행됨")
    }
}
```

- **`var`, `val`** → 클래스 외부에서 접근 가능 (멤버 필드로 등록됨)
- **파라미터만 선언 (var/val 없음)** → 외부 접근 불가, 내부에서도 직접 인식 불가

---

## 🧾 네이밍 규칙

| 구분 | 특징 | 예시 |
|------|------|------|
| **클래스명** | 명사 / PascalCase | `Hero`, `MonsterInfo` |
| **필드명** | 명사 / camelCase | `level`, `itemList` |
| **메서드명** | 동사 / camelCase | `attack()`, `findWeakPoint()` |

---

## 함수와 메서드의 차이

| 구분 | 정의 | 특징 |
|------|------|------|
| **함수 (Function)** | 입력이 같으면 출력이 항상 동일 | 상태(필드)에 의존하지 않음 |
| **메서드 (Method)** | 클래스 내부에 정의된 함수 | 클래스 필드(상태)에 따라 결과가 달라질 수 있음 |

---

## 테스트 코드 기법

### Given → When → Then

1. **Given:** 테스트에 필요한 조건(환경) 준비
2. **When:** 테스트 대상 실행
3. **Then:** 결과 검증 (`assert` 사용)

```kotlin
@Test
fun `selfAid()가 잘 작동하는지 확인`(){
    // given
    val cleric = Cleric(name = "승엽")
    
    // when
    cleric.selfAid()
    
    // then
    assertEquals(5, cleric.mp)
}
```

---

# 과제 리뷰

```kotlin
class Cleric(
    var name: String,
    var hp: Int = 50,
    val maxHp: Int = 50,
    var mp: Int = 10,
    val maxMp: Int = 10
) {
    fun selfAid() {
        if (mp >= 5) {
            mp -= 5
            hp = maxHp
        }
    }

    fun pray(time: Int): Int {
        val mpRecovery = time + Random.nextInt(0, 3)
        if ((mp + mpRecovery) < maxMp) {
            mp += mpRecovery
        } else {
            val actualRecovery = maxMp - mp
            mp = maxMp
            return actualRecovery
        }
        return mpRecovery
    }
}
```

## 클래스 설명

- 캐릭터를 생성하는 클래스이다.
- `name`은 **생성 시 반드시 입력해야 하는 필수 인자**이다.
- `hp`, `maxHp`, `mp`, `maxMp`는 **기본값**을 가지므로 인자를 생략할 수 있다.
- `maxHp`와 `maxMp`는 `val`이므로 외부에서 변경할 수 없다.

---

## selfAid()

```kotlin
fun selfAid() {
    if (mp >= 5) {
        mp -= 5
        hp = maxHp
    }
}
```

- **HP 회복 스킬**이다.
- `selfAid()`를 사용하면 **MP를 5 소모**하고 **HP를 최대치(`maxHp`)까지 회복**한다.
- 단, **MP가 5 이상일 때만 발동**할 수 있다.
- MP가 부족할 경우 아무 일도 일어나지 않는다.

---

## pray()

```kotlin
fun pray(time: Int): Int {
    val mpRecovery = time + Random.nextInt(0, 3)
    if ((mp + mpRecovery) < maxMp) {
        mp += mpRecovery
    } else {
        val actualRecovery = maxMp - mp
        mp = maxMp
        return actualRecovery
    }
    return mpRecovery
}
```

- **MP 회복 스킬**이다.
- `Random.nextInt(0, 3)`은 **0~2 사이의 무작위 정수**를 반환한다.
- `mpRecovery`는 `time`과 무작위 값(0~2)을 더한 값으로, **회복하려는 MP 양**을 의미한다.
- `actualRecovery`는 **`maxMp`를 초과하지 않도록 실제로 회복되는 MP 양**을 계산한 값이다.
- 회복 후 MP가 `maxMp`를 넘지 않으면 `mpRecovery`를 반환하고,  
  **최대치를 초과할 경우** 초과분을 보정하여 `actualRecovery`를 반환한다.
- 즉, **함수의 반환값은 실제로 회복된 MP의 양**이다.

---

## Test Code

```kotlin
class ClericTest {
    @Test
    fun `selfAid()가 잘 작동하는지 확인`() {
        val cleric = Cleric(name = "승엽")

        cleric.selfAid()

        assertEquals(5, cleric.mp)
    }

    @Test
    fun `pray()가 잘 작동하는지 확인`() {
        val cleric = Cleric(name = "승엽")

        cleric.selfAid()
        val pray = cleric.pray(4)

        assertTrue(pray in 4..5)
    }
}
```

### selfAid() 테스트

- **의도**: `selfAid()`가 MP를 5 소모하는지 확인한다.
- Cleric 객체를 생성한 후 `selfAid()` 호출 → MP가 10 → 5로 줄어드는지 검증.
- `assertEquals(5, cleric.mp)`로 기대값과 실제값을 비교한다.

---

### pray() 테스트

- **의도**: `pray()`가 지정된 시간(`time`)을 기반으로 MP를 올바르게 회복하는지 확인한다.
- `Random.nextInt(0, 3)`에 의해 실제 회복량은 `time + 0~2` 중 하나가 된다.
- `selfAid()`로 MP를 5 소모한 후, `pray(4)`를 호출하면 회복량은 **4~6 중 하나**이다.
    - 단, 최대 MP가 10이므로 실제 회복량은 `4` 또는 `5`가 된다.
- 따라서 `assertTrue(pray in 4..5)`로 정상 동작 여부를 검증한다.

---

### 사용한 함수

| 함수 | 설명 |
|------|------|
| **assertEquals(expected, actual)** | 예상값(`expected`)과 실제값(`actual`)이 같은지 비교한다. |
| **assertTrue(condition)** | 주어진 조건(`condition`)이 참(`true`)인지 확인한다. |
