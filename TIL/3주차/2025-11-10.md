# Kotlin - ë‹¤í˜•ì„± (Polymorphism)

## 1ï¸âƒ£ ê°œë…

> â€œì–´ë–¤ ê²ƒì„ ì´ë ‡ê²Œë„, ì €ë ‡ê²Œë„ ë¶€ë¥¼ ìˆ˜ ìˆëŠ” ê²ƒâ€

ì˜ˆë¥¼ ë“¤ì–´,
- ì†í¥ë¯¼ì€ â€œë‚¨ìâ€ì´ê¸°ë„ í•˜ê³  â€œì¶•êµ¬ì„ ìˆ˜â€ì´ê¸°ë„ í•˜ë‹¤.
- ì†Œíƒ€ë‚˜ëŠ” â€œì°¨â€ì´ê¸°ë„ í•˜ê³  â€œê¸°ê³„â€ì´ê¸°ë„ í•˜ë‹¤.

```kotlin
abstract class Monster {
    open fun run() = println("ëšœë²…ëšœë²…")
}

class Slime(val suffix: String) : Monster() {
    var hp = 50
    override fun run() = println("ìŠ¬ë¼ì„ $suffix ê°€ ë„ë§ì³¤ë‹¤")
}
```

```kotlin
fun main() {
    val slime = Slime(suffix = "A")
    val monster: Monster = Slime(suffix = "B")

    slime.run()     // ìŠ¬ë¼ì„ A ê°€ ë„ë§ì³¤ë‹¤
    monster.run()   // ìŠ¬ë¼ì„ B ê°€ ë„ë§ì³¤ë‹¤
}
```

ğŸ’¡ **ì„¤ëª…:**
- ì»´íŒŒì¼ ì‹œì  â†’ `monster`ëŠ” `Monster` íƒ€ì…ìœ¼ë¡œ ì¸ì‹
- ëŸ°íƒ€ì„ ì‹œì  â†’ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ì¸ `Slime`ì˜ `run()` ì‹¤í–‰

---

## 2ï¸âƒ£ ìƒìœ„ íƒ€ì… ë³€ìˆ˜ë¡œ í•˜ìœ„ íƒ€ì…ì„ ì°¸ì¡°

```kotlin
val character: Character = Hero(name = "í™ê¸¸ë™", hp = 100)
```

- ìƒìœ„ íƒ€ì…(Character)ì— í•˜ìœ„ íƒ€ì…(Hero) ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤.
- ì–´ë–¤ ë©¤ë²„ì— ì ‘ê·¼ ê°€ëŠ¥í•œì§€ëŠ” **ì„ ì–¸ëœ íƒ€ì…**(`Character`)ì´ ê²°ì •í•œë‹¤.
- ì‹¤ì œ ë™ì‘(ì˜¤ë²„ë¼ì´ë“œëœ í•¨ìˆ˜ í˜¸ì¶œ)ì€ **ì‹¤ì œ ê°ì²´ íƒ€ì…**(`Hero`)ì´ ê²°ì •í•œë‹¤.

---

## 3ï¸âƒ£ ì¸í„°í˜ì´ìŠ¤ íƒ€ì… ì‚¬ìš©

```kotlin
interface Human {
    fun speak()
}

val human: Human = Dancer("ëŒ„ì„œ")
human.speak()  // "ëŒ„ì„œ: ì¶¤ì¶”ë©´ì„œ ë§í•˜ê¸°!"
```

> ì¸í„°í˜ì´ìŠ¤ë„ ë³€ìˆ˜ì˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°,  
> ìƒìœ„ ê°œë…ìœ¼ë¡œ ë‹¤ì–‘í•œ ê°ì²´ë¥¼ í†µí•© ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

---

## 4ï¸âƒ£ íƒ€ì… ìºìŠ¤íŒ… (Type Casting)

### (1) `as` â€” ê°•ì œ ìºìŠ¤íŒ…

```kotlin
val monster: Monster = Slime("B")
val slime: Slime = monster as Slime
```

- ìƒìœ„ íƒ€ì…(`Monster`)ì„ í•˜ìœ„ íƒ€ì…(`Slime`)ìœ¼ë¡œ ê°•ì œ ë³€í™˜
- ì‚¬ìš© ì‹œ ëŸ°íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ìœ„í—˜í•˜ë‹¤

---

### (2) `is` â€” Smart Cast

```kotlin
val character: Character = Wizard("í•´ë¦¬í¬í„°", 10)

if (character is Hero) {
    // characterê°€ Hero íƒ€ì…ì„ì´ ë³´ì¥ë¨
    character.attack()
}
```

```kotlin
fun demo(x: Any) {
    if (x is String) {
        print(x.length) // xëŠ” ìë™ìœ¼ë¡œ Stringìœ¼ë¡œ ìºìŠ¤íŒ…ë¨
    }
}
```

ğŸ’¡ `is`ë¥¼ í†µí•´ íƒ€ì… ê²€ì‚¬ë¥¼ í†µê³¼í•˜ë©´,  
ì½”í‹€ë¦°ì´ ìë™ìœ¼ë¡œ `Smart Cast`ì„ ìˆ˜í–‰í•œë‹¤.

---

## 5ï¸âƒ£ í•µì‹¬ ìš”ì•½

- `as`: ëª…ì‹œì  ìºìŠ¤íŒ… (ìœ„í—˜, ì˜ëª»ëœ ê²½ìš° ì˜ˆì™¸ ë°œìƒ)
- `is`: íƒ€ì… ê²€ì‚¬ (ì•ˆì „, Smart Cast ì§€ì›)
- ìƒì† ê´€ê³„ê°€ ì„±ë¦½í•˜ë©´ ë¶€ëª¨ íƒ€ì… ë³€ìˆ˜ì— ìì‹ ì¸ìŠ¤í„´ìŠ¤ ëŒ€ì… ê°€ëŠ¥(`is-a ê´€ê³„`)
- ì–´ë–¤ ë©¤ë²„ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ”ê°€ëŠ” ìƒìì˜ íƒ€ì…ì´ ê²°ì •í•œë‹¤(`ì»´íŒŒì¼ ì‹œì `)
- ë©¤ë²„ê°€ ì–´ë–»ê²Œ ì›€ì§ì´ëŠ”ì§€ëŠ” ë‚´ìš©ì˜ íƒ€ì…ì´ ê²°ì •í•œë‹¤(`ëŸ°íƒ€ì„ ì‹œì `)
- ê°™ì€ ë¶€ëª¨ë¥¼ ê°€ì§„ ìì‹ í´ë˜ìŠ¤ëŠ” **ë™ì¼í•œ ì·¨ê¸‰ ê°€ëŠ¥**
- í•˜ì§€ë§Œ **ì˜¤ë²„ë¼ì´ë“œëœ ë™ì‘ì€ ê° í´ë˜ìŠ¤ì˜ ì •ì˜ì— ë”°ë¼ ë‹¤ë¦„**

---

## ê³¼ì œ ë¦¬ë·°

> ### ì—°ìŠµë¬¸ì œ 2
>
> 1)  val obj: X = A() ë¡œ Aì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„, ë³€ìˆ˜ objì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œë¥¼ a(), b(), c() ì¤‘ì— ê³¨ë¼ë³´ì‹œì˜¤
>       
>       
>     ë‹µ: a()
>
> 2)  val y1: Y = A()
>    val y2: Y = B() ë¡œ Aì™€ Bì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„
>    y1.a()
>    y2.a() ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œì— í™”ë©´ì— í‘œì‹œë˜ëŠ” ë‚´ìš©ì„ ë§í•˜ì‹œì˜¤.
>       
> 
>     ë‹µ:
>     Aa
>     Ba

```kotlin
interface X {
    fun a()
}

abstract class Y : X {
    abstract fun b()
}

class A : Y() {
    override fun b() {
        println("Ab")
    }

    override fun a() {
        println("Aa")
    }

    fun c() {
        println("Ac")
    }
}

class B : Y() {
    override fun b() {
        println("Bb")
    }

    override fun a() {
        println("Ba")
    }

    fun c() {
        println("Bc")
    }
}
```

---

> ### ì—°ìŠµë¬¸ì œ 3
>
> ë¬¸ì œ 2 ì—ì„œ ì´ìš©í•œ Aí´ë˜ìŠ¤ë‚˜ Bí´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°ê° 1ê°œì”© ìƒì„±í•˜ì—¬, List ì— ì°¨ë¡€ë¡œ ë‹´ëŠ”ë‹¤.
> ê·¸ í›„ì— List ì˜ ìš”ì†Œë¥¼ ì°¨ë¡€ëŒ€ë¡œ êº¼ë‚´ ê°ê°ì˜ ì¸ìŠ¤í„´ìŠ¤ì˜ b() ë©”ì†Œë“œë¥¼ í˜¸ì¶œ í•˜ì—¬ì•¼ í•œë‹¤. ì´ìƒì„ ì „ì œë¡œ ë‹¤ìŒ ë¬¼ìŒì— ë‹µí•˜ì‹œì˜¤.
>
> 1) List ë³€ìˆ˜ì˜ íƒ€ì…ìœ¼ë¡œ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ì—¬ì•¼ í•˜ëŠ”ê°€
> 2) ìœ„ì—ì„œ ì„¤ëª…í•˜ê³  ìˆëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤

```kotlin
val alphabets: List<Y> = listOf(
    A(),
    B(),
)

alphabets.forEach { alphabet ->
    alphabet.b()
}
```