# Kotlin 문법 기초
1. [함수](#함수)
2. [변수](#variable)
3. [Control Flow](#control-flow)
4. [Null Safety](#null-safety)
5. [+) 코딩 컨벤션 ](#coding-conventions)

## Variable

- 함수명 컨벤션
    - 기본적으론 소문자
    - 의미있는 상수 PI 같은건 대문자

- 사용하지 않는 변수에 노란불⚠️이 뜨는 이유
    - 메모리 낭비 때문에
    - 메모리에 할당하는 것 자체가 비용이 큰 행위

- top-level에 변수 선언 가능 (= 정적)
    - const val로 컴파일타임 상수를 선언해서 쓰는게 좋다
    <details>
    <summary>Java)</summary>

    `static int a = 10;` 메모리에 10이라는 값이 고정으로 올라감
    </details>


- `const` 키워드
    - 컴파일타임 상수 `const val *PI* = 3.14` — 성능이 더 좋음
    - 런타임 상수 `val *PI2* = 3.14`

    <details>
    <summary>Java)</summary>

    - `static final int a = 10;` 이것만 있으면 런타임에 할당됨

    - `int b = a` 가 있다면 컴파일타임에 할당됨 … 맥락에 따라
    </details>
    


- 컴파일러 — 코드를 해석하는 프로그램
    - 프로그래밍 언어 > 기계어


## Control Flow

### If
> if문이 아니라 **표현식 expression**임


```kotlin
val result = if(a > b) a else b    // a 또는 b가 반환됨
```

### When

> Switch~case문과 비슷하지만 더 다양한 기능 지원  
> when도 **표현식 expression**임
```kotlin
val a = 10
val b = 5

when(a) {
    10 -> println("a는 10이다")
    else -> println("a는 10이 아니다")
}

// 표현식
// subject 없이도 사용 가능
val result = when {
    a > 10 -> true
    else -> false
}
```

## Loop
### Ranges
- `1..4` ↔️ 1, 2, 3, 4
    - `val list: List<Int> = (1..4).toList()` 이렇게도 사용 가능
- `4 downTo 1` ↔️ 4, 3, 2, 1
- `0 until 3` ↔️ 0, 1, 2
    - `until`은 내부적으로 함수

```kotlin
repeat(10){
    println("hi")
}
```

```kotlin
for (i in 0..4){
		println(i)
} // 0 1 2 3 4

// list 순회
val list = listOf("apple", "banana", "kiwi")
for (entry in list){
    println("I like ${entry}")
}
```

```kotlin
var switch = true
var result = ""
while (switch) {
    val str = "hi"
    print(str)
    result += str
    
    if(result=="hihi"){
        switch = false
    }
}

var a = 0
var b = 5
do {
    println(a)
    a++
} while (a < b)
```


## Null safety

```kotlin
var name: String = "홍길동"
name = null     // 컴파일 에러

var name2: String? = "홍길동"
name2 = null
println(name2?.toInt())    // 안전한 호출

// !! null이 아님을 보증 (사용 금지)
name = name2!!
```

### Elvis operator `?:`
```kotlin
val nullString: String? = null
println(nullString?.length ?: 0)
// 0
```

---

## Coding conventions

[Coding conventions | Kotlin](https://kotlinlang.org/docs/coding-conventions.html#source-code-organization)

- package 도메인 뒤집는 이유
    - Kotlin과 Java에서는 package가 클래스의 고유 식별자(namespace)역할을 함
    - 즉, 고유한 네임스페이스를 만들기 위해서

- source file 이름
  - 단일 클래스나 인터페이스가 포함된 경우, `클래스명.kt`
  - 여러 클래스나 최상위 선언만 포함된 경우, 파일의 내요을 설명하는 이름

### 명명 규칙 (Naming rules)

| 구분 | 예시 | 사용 위치 |
| --- | --- | --- |
| camelCase | `userName`, `getUserInfo` | 변수, 함수, 메서드 |
| PascalCase | `UserProfile`, `MainActivity` | 클래스, 인터페이스, 데이터클래스 |
| snake_case | `user_name`, `created_at` | DB 필드, JSON, 파이썬 변수 |
| UPPER_SNAKE_CASE | `MAX_VALUE`, `DEFAULT_PORT` | 상수, enum |
| kebab-case | `user-profile`, `get-user-info` | URL, 파일명, 리소스 |

- **package**
  - `org.example.project`
  - 항상 소문자로 작성하며, 밑줄을 사용하지 않는다
  - 여러 단어로 구성된 이름은 권장되지 않지만, 사용한다면  카멜 표기법을 사용 (`org.example.myProject`)

- **클래스 / 객체**
  - 대문자 카멜 표기법(= 파스칼 케이스)

    ```kotlin
    open class DeclarationProcessor { /*...*/ }
    
    object EmptyDeclarationProcessor : DeclarationProcessor() { /*...*/ }
    ```


- **함수 / 프로퍼티 / 지역 변수**
  - 소문자로 시작, 밑줄 없이 카멜 표기법

    ```kotlin
    fun processDeclarations() { /*...*/ }
    var declarationCount = 1
    ```

  - 예외: factory function

    클래스 인스턴스를 생성하는 데 사용되는 팩토리 함수는 abstract return type과 동일한 이름을 가질 수 있다

      ```kotlin
      interface Foo { /*...*/ }
      class FooImpl : Foo { /*...*/ }
      fun Foo(): Foo { return FooImpl() }
      ```


- **테스트 메서드**
  - 공백 포함된 문자을 backtick ``` 으로 묶어서 이름으로 사용 가능
  - 언더바 `_` 도 사용 가능

    ```kotlin
    class MyTestCase {
        @Test fun `ensure everything works`() { /*...*/ }
        @Test fun ensureEverythingWorks_onAndroid() { /*...*/ }
    }
    ```


- **속성 Property**
  - 상수 constants (`const` val이거나, immutable 데이터를 저장하는 top-level 또는 object `val` 프로퍼티)
    - UPPER_SNAKE_CASE(스크리밍 스네이크 케이스) 사용

    ```kotlin
    const val MAX_COUNT = 8
    val USER_NAME_FIELD = "UserName"
    ```

  - 동작이나 mutable 데이터가 있는 객체를 보관하는 top-level이나 object 프로퍼티
    - 카멜 케이스 사용

    ```kotlin
    val mutableCollection: MutableSet<String> = HashSet()
    ```

  - 열거형 상수
    - UPPER_SNAKE_CASE(스크리밍 스네이크 케이스) 또는 대문자 카멜 케이스(= 파스칼 케이스) 사용

    ```kotlin
    enum class Color { RED, GREEN }
    ```


---

## Decompile

> Shift + Ctl + A ➡️ Kotlin Bytecode ➡️ Decompile

- ConsoleKt
  - Java 파일에서 코틀린 코드에 접근할 때