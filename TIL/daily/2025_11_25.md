# TIL


## DTO (Data Transfer Object)
- 데이터 소스를 모델 클래스로 변환하는 과정에서 순수하게 클래스에 담기 위한 중간 전달 객체
- 잘못된 데이터 소스(Json)를 받더라도 안 터지게 하려는 클라이언트 개발자의 방어 수단
- 서버 개발자를 믿지마...
- 데이터가 이상하게 들어올 경우 안 터지게 담을 수 있는 객체(DTO)
```kotlin
@Serializable
data class TodoDto(
    val userId: Int? = null,
    val id: Int? = null,
    val title: String? = null,
    val completed: Boolean? = null,
)
```
- 모든 필드가 Nullable 
- 직렬화, 역직렬화 제공


### DTO 가 필요한 이유

- Model class 는 non-nullable 값만 가지고 있도록 한다
- Json 데이터는 Null 값을 포함할 수 있다.
- 불안전한 코드가 포함될 것 같다면 DTO를 도입하자!
### Mapper

- DTO 를 모델 클래스로 변환
- 순수한 데이터 소스 (DTO)를 원하는 모델 클래스로 변환하기 위한 로직은 별도의 mapper를 통해 변환
- Json -> DTO --- (mapper) -> Model Class

- Maper 작성 시 확장함수를 사용
  - DTO는 자동으로 만들고 수정하지 않음
  - mapper는 복잡한 로직이 포함될 수 있어서 인간이 작성, 문제가 있다면 여기만 살핀다.
  - DTO와 mapper 코드 분리


#### DTO 를 모델로 변경했을 때의 장점
- Boolean 필드는 is 접두어 사용 (코틀린 컨벤션)
- Nullable 타입 제거로 안전성 향상
- 도메인 모델은 순수 코틀린 타입 사용


