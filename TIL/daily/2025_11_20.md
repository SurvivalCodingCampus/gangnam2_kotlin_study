# TIL

## 2025_11_20 _ Model & Repository / Test 이론

## Model
- 일반적으로 data class로 정의~
- 별도의 기능을 가지지 않는 순수 클래스
- 모델 객체 클래스의 속성에 대한 데이터를 조회할 수 있는 클래스
- Model 객체는 데이터 구조 정의(순수 데이머, 불변)

## Repository
- Repository 패턴은 소프트웨어 개발에서 데이터 저장소에 접근하는 객체를 추상화하고, 데이터소스(DB, File) 과 통신을 담당하는 객체를 캡슐화하는 디자인 패턴

### Repository 패턴의 이점
- 데이터 접근 추상화
- 유지보수성 향상
- 테스트 용이성
- 확장성

### 도메인 특화 기능을 Repository가 제공하는 경우의 장점
- 도메인 의도가 명확히 드러남
- 재사용 가능한 쿼리 로직
- 데이터 소스 구현과 분리된 비즈니스 요구사항 처리


## Test 이론
### Test Double
- 테스트를 진행하기 어려운 경우 테스트가 가능하도록 만들어주는 객체

### 테스트가 어려운 구조
- 의존성이 강한 구조
- 어떤 클래스 안에서 다른 클래스를 생성하는 것
```kotlin
class Engine
class Car {
    val engine = Engine() 
}
```
- 이건 테스트하기 어려움 Car 안에 Engine이 있음

```kotlin
class Car(val engine: Engine) {
    fun start() {
        engine.start()
    }
}
```
- 테스트가 가능한 구조

- 테스트하기에는 클래스보다는 인터페이스가 낫다.
```kotlin
// 테스트가 어려운 구조 개선
class TodoRepositoryImpl: TodoRepository {
    private val dataSoucre = TodoDateSource()
}

class TodoRepositoryImpl(
    private val dataSoucre: TodoDateSource
): TodoRepository {
    
}
```
- 클래스 내부에서 다른 클래스를 생성하기 보다 외부에서 받도록 수정!

### 좋은 Unit Test의 6가지 조건(FRIEND)
- Fast - 빠르고
- Reliable - 믿을 수 있고
- Independent - 독립적인
- Ease of Maintenance - 유지 관리가 쉽고
- Nearly compacted code - 거의 압축적인 코드
- Dependencies should be less - 의존성이 적어야 한다